# 搜索意图分析工具

**文件名**: `intent_analyzer.py`

## 功能概述

搜索意图分析工具用于分析关键词的搜索意图，基于INCEB五层框架（信息型、导航型、商业型、交易型、行为型）。这有助于理解用户搜索背后的目的，从而指导内容创建和营销策略。

## 使用方法

### 基本用法

```bash
python intent_analyzer.py --input data/scored_2025-08-04.csv
```

### 参数说明

- `--input`：输入CSV文件路径（必需）
- `--output`：输出目录，默认为data
- `--query-col`：关键词列名，默认为"query"

### 输出说明

工具会生成以下文件：

1. `intent_YYYY-MM-DD.csv`：包含所有关键词的意图分析结果
2. `intent_summary_YYYY-MM-DD.json`：意图分析摘要（JSON格式）
3. `intent_I_YYYY-MM-DD.csv`：信息型关键词
4. `intent_N_YYYY-MM-DD.csv`：导航型关键词
5. `intent_C_YYYY-MM-DD.csv`：商业型关键词
6. `intent_E_YYYY-MM-DD.csv`：交易型关键词
7. `intent_B_YYYY-MM-DD.csv`：行为型关键词

## 技术细节

### INCEB五层框架

1. **I - Informational（信息型）**
   - 用户目的：获取信息、背景知识
   - 特征词：what, how, guide, tutorial, learn
   - 推荐内容：入门指南、终极手册、清单/模板下载

2. **N - Navigational（导航型）**
   - 用户目的：直接到达目标站点
   - 特征词：login, download, website, official, app
   - 推荐内容：站点结构优化、登录/定价页加载加速

3. **C - Commercial（商业型）**
   - 用户目的：比较、评估、意向未定
   - 特征词：best, top, compare, vs, review
   - 推荐内容：对比页、案例库、ROI计算器

4. **E - Transactional（交易型）**
   - 用户目的：立即购买/下载
   - 特征词：buy, price, discount, deal, free
   - 推荐内容：促销活动、一键试用、限时优惠弹窗

5. **B - Behavioral（行为型）**
   - 用户目的：使用后出现的问题或深度用法
   - 特征词：troubleshoot, fix, error, advanced, settings
   - 推荐内容：故障排查文档、教程视频、二次销售插件

### 判定算法

1. **词面分析**：基于关键词中的特征词和修饰词
2. **模式匹配**：使用正则表达式匹配常见的意图模式
3. **规则系统**：基于预定义规则判断搜索意图

### 代码结构

```python
class IntentAnalyzer:
    def __init__(self):
        # 初始化设置和规则库
        
    def analyze_keywords(self, df, query_col='query'):
        # 分析关键词意图
        
    def detect_intent(self, query):
        # 判断单个关键词的意图
        
    def generate_intent_summary(self, df):
        # 生成意图分析摘要
        
    def get_action_recommendation(self, intent):
        # 获取针对特定意图的行动建议
```

## 示例输出

### CSV输出

```
query,value,seed_keyword,score,intent,action_recommendation
what is ai,1200,ai tools,85,I,创建入门指南和教程内容
best ai tools 2025,950,ai tools,78,C,创建对比页和评测内容
buy ai writing tool,320,ai tools,65,E,优化购买流程和促销活动
```

### JSON摘要

```json
{
  "total_keywords": 25,
  "intent_counts": {
    "I": 19,
    "N": 1,
    "C": 4,
    "E": 1,
    "B": 0
  },
  "intent_percentages": {
    "I": 76.0,
    "N": 4.0,
    "C": 16.0,
    "E": 4.0,
    "B": 0.0
  },
  "intent_keywords": {
    "I": ["what is ai", "how to use ai tools", ...],
    "N": ["claude ai login"],
    "C": ["best ai tools 2025", "ai tools vs human", ...],
    "E": ["buy ai writing tool"],
    "B": []
  },
  "recommendations": {
    "I": "创建入门指南和教程内容",
    "N": "优化网站导航和登录页面",
    "C": "创建对比页和评测内容",
    "E": "优化购买流程和促销活动",
    "B": "提供故障排查和高级教程"
  }
}
```

## 注意事项

- 意图判断基于规则系统，可能不适用于所有领域的关键词
- 某些关键词可能同时具有多种意图，目前只返回最主要的意图
- 行动建议是通用性的，可能需要根据具体业务进行调整

## 未来改进

- 集成机器学习模型，提高意图判断准确性
- 支持多意图分析，返回意图概率分布
- 添加SERP分析功能，基于搜索结果页面结构判断意图
- 支持更多语言和地区的意图分析
- 添加自定义规则和意图类型的功能