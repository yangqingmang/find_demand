# 关键词评分工具

**文件名**: `keyword_scorer.py`

## 功能概述

关键词评分工具用于对关键词进行综合评分和排序，帮助识别高潜力的关键词机会。评分基于多个维度，包括搜索量、增长率和关键词难度等，可以根据需求自定义权重。

## 使用方法

### 基本用法

```bash
python keyword_scorer.py --input data/trends_all_2025-08-04.csv --enrich
```

### 参数说明

- `--input`：输入CSV文件路径（必需）
- `--enrich`：是否丰富数据（添加搜索量、CPC等）
- `--volume-weight`：搜索量权重，默认0.4
- `--growth-weight`：增长率权重，默认0.4
- `--kd-weight`：关键词难度权重，默认0.2
- `--min-score`：最低评分过滤
- `--output`：输出目录，默认为data
- `--volume-col`：搜索量列名，默认为"monthly_searches"
- `--growth-col`：增长率列名，默认为"growth"
- `--kd-col`：关键词难度列名，默认为"keyword_difficulty"

### 输出说明

工具会生成以下文件：

1. `scored_YYYY-MM-DD.csv`：包含所有关键词的评分结果
2. `scored_high_score_YYYY-MM-DD.csv`：高分关键词（分数>=70）

CSV文件包含以下字段：
- 原始数据的所有字段
- `volume_score`：搜索量评分（0-100）
- `growth_score`：增长率评分（0-100）
- `kd_score`：关键词难度评分（0-100）
- `score`：综合评分（0-100）
- `grade`：等级（S/A/B/C/D）

## 技术细节

### 评分算法

1. **归一化**：将各维度数据归一化到0-100范围
   ```
   normalized_value = (value - min_value) / (max_value - min_value) * 100
   ```

2. **加权计算**：根据权重计算综合评分
   ```
   score = volume_weight * volume_score + growth_weight * growth_score + kd_weight * kd_score
   ```

3. **等级划分**：
   - S级：90-100分
   - A级：80-89分
   - B级：70-79分
   - C级：60-69分
   - D级：0-59分

### 数据丰富

如果启用了`--enrich`选项，工具会添加以下模拟数据：
- `monthly_searches`：月搜索量
- `competition`：竞争度（0-1）
- `cpc`：平均点击成本（美元）

在实际应用中，这些数据可以从Google Ads API或其他SEO工具API获取。

### 代码结构

```python
class KeywordScorer:
    def __init__(self):
        # 初始化设置
        
    def enrich_with_ads_data(self, df):
        # 丰富关键词数据
        
    def normalize_values(self, values):
        # 归一化数值
        
    def score_keywords(self, df, volume_col=None, growth_col=None, kd_col=None):
        # 评分计算
        
    def assign_grade(self, score):
        # 分配等级
        
    def filter_keywords(self, df, min_score=None):
        # 过滤低分关键词
```

## 示例输出

```
query,value,seed_keyword,monthly_searches,competition,cpc,volume_score,growth_score,kd_score,score,grade
deepseek ai,27700,ai tools,7370,0.46,6.66,100.0,0.0,50,70.0,B
napkin ai,11150,ai tools,3200,0.72,4.32,43.4,0.0,50,38.4,D
...
```

## 注意事项

- 评分权重总和应为1.0，如果不是，脚本会自动归一化
- 如果输入数据缺少某些列，相应的评分维度会被忽略或使用默认值
- 模拟数据仅供演示，实际应用中应使用真实数据源

## 未来改进

- 集成真实的Google Ads API和SEO工具API
- 添加更多评分维度，如转化率、竞争度等
- 支持自定义评分公式和等级划分
- 添加历史数据比较功能
- 实现可视化评分结果