# 项目开发规范

## 1. 总体原则

本项目遵循 **PEP 8** Python 编码规范，并结合项目现有实践，确保代码库的一致性、可读性和可维护性。

## 2. Python 编码规范

### 2.1 命名约定

- **类名**: 使用 `UpperCamelCase` (大驼峰命名法)，例如 `UserService`
- **函数名**: 使用 `snake_case` (下划线分隔)，例如 `get_user_by_id()`
- **变量名**: 使用 `snake_case`，例如 `user_name`
- **常量名**: 使用 `SCREAMING_SNAKE_CASE` (全大写下划线分隔)，例如 `MAX_SIZE`
- **模块名**: 使用全小写字母，例如 `website_builder`
- **包名**: 使用全小写字母，例如 `src.website_builder`

### 2.2 注释规范

- **文档字符串**: 类、函数和模块应使用三引号文档字符串，清晰说明其目的、参数和返回值
- **行内注释**: 仅用于解释复杂或非显而易见的逻辑
- **类型提示**: 使用 Python 类型提示来提高代码可读性

### 2.3 文件结构

- 代码文件应保持整洁，逻辑单元（如类、函数）之间有适当的空行分隔
- 每个模块应有清晰的职责划分
- 导入语句应按标准库、第三方库、本地模块的顺序排列

### 2.4 格式化

- **缩进**: 统一使用 4 个空格进行缩进
- **行长度**: 建议单行代码不超过 88 个字符（Black 格式化工具标准）
- **空行**: 顶级函数和类定义前后用两个空行分隔
- **字符串**: 优先使用双引号，保持一致性

## 3. Python 代码质量标准

### 3.1 源文件基础

- **文件编码**: 统一使用 UTF-8
- **文件头**: Python 文件应包含适当的编码声明和模块文档字符串

### 3.2 导入规范

- **导入顺序**: 标准库 → 第三方库 → 本地模块
- **导入方式**: 避免使用 `from module import *`
- **导入分组**: 不同类型的导入之间用空行分隔

### 3.3 函数和类设计

- **函数长度**: 单个函数不应超过 50 行
- **参数数量**: 函数参数不应超过 5 个，考虑使用配置对象
- **单一职责**: 每个函数和类应有明确的单一职责
- **返回值**: 函数应有明确的返回值类型和含义

## 4. 项目特定规范

### 4.1 模板和脚本管理

- **在有通用模板的前提下，不要添加新脚本来试图实现新功能**
  - 优先使用现有的通用模板和工具
  - 避免为特定功能创建独立的脚本文件
  - 如需扩展功能，应修改现有的通用工具而不是创建新工具

### 4.2 测试脚本管理

- **测试脚本用完要删除**
  - 临时创建的测试脚本在完成测试后必须删除
  - 不要在项目中保留临时的调试或测试文件
  - 保持项目目录的整洁性

### 4.3 依赖管理

- **添加了新的依赖后，要及时修改 requirements 文件**
  - 任何新增的 Python 包依赖都必须添加到 `requirements.txt`
  - 指定具体的版本号以确保环境一致性
  - 定期检查和更新依赖版本

### 4.4 文件组织

- **生成的文件应保持分离，不要混合在一起**
- **考虑将代码组织成合理的模块，避免生成超过 500 行的长文件**
- **每个模块应遵循单一职责原则**

### 4.5 部署规范

- **使用现有的部署工具和配置**
- **确保部署配置的一致性和可重复性**
- **遵循既定的部署流程和最佳实践**

## 5. 工具使用规范

### 5.1 工具调用限制

- **每条消息最多使用 3 个工具**
- **大内容工具应在单独的消息中调用**
- **优先使用 `replace_in_file` 进行文件修改，而不是 `write_to_file`**

### 5.2 文件操作

- **使用 `replace_in_file` 进行局部修改**
- **使用 `write_to_file` 仅用于创建新文件或完全重写小文件**
- **确保文件路径的正确性**

## 6. 响应规范

### 6.1 响应风格

- **保持响应简短明确**
- **不要做超出用户要求的事情**
- **除非用户询问，否则不要解释为什么这样做**
- **禁止以 "Great", "Certainly", "Okay", "Sure" 开头**

### 6.2 技术实现

- **除非用户要求更多，否则只使用单一方法实现功能**
- **优先考虑简单、直接的解决方案**
- **确保代码的可读性和可维护性**

## 7. 质量保证

### 7.1 代码审查

- **所有代码修改都应遵循本规范**
- **定期检查代码质量和一致性**
- **确保新增功能不破坏现有功能**

### 7.2 测试

- **确保所有功能都经过充分测试**
- **测试完成后及时清理测试文件**
- **保持测试环境的整洁**

## 8. 文档维护

### 8.1 文档更新

- **及时更新相关文档**
- **确保文档与代码实现保持同步**
- **使用清晰、简洁的语言**

### 8.2 注释维护

- **保持注释的准确性和时效性**
- **删除过时或无用的注释**
- **确保注释能够帮助理解代码逻辑**

## 9. 版本控制

### 9.1 提交规范

- **使用清晰、描述性的提交信息**
- **每次提交应包含相关的功能或修复**
- **避免提交临时或测试文件**

### 9.2 分支管理

- **遵循既定的分支策略**
- **及时合并和清理分支**
- **确保主分支的稳定性**

---

**注意**: 本规范文件是项目开发的基础准则，所有团队成员都应严格遵循。如有疑问或需要修改，请通过正式流程进行讨论和更新。