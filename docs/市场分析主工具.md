# 市场分析主工具

**文件名**: `market_analyzer.py` 和 `run_analysis.py`

## 功能概述

市场分析主工具提供了两种使用方式：

1. **统一执行入口** (`run_analysis.py`) - 推荐使用，提供简化的命令行界面
2. **完整功能版本** (`market_analyzer.py`) - 提供所有高级参数和配置选项

工具整合了所有分析功能，按顺序执行Google Trends数据采集、关键词评分和搜索意图分析，提供完整的市场需求分析流程。

## 推荐使用方式：统一执行入口

### 基本用法

```bash
# 最简单的使用方式
python run_analysis.py "ai tools"

# 指定地区
python run_analysis.py "ai tools" --geo US

# 分析多个关键词
python run_analysis.py "ai tools" "marketing automation" --geo US
```

### 参数说明

- `keywords`：要分析的关键词（必需，可以是多个）
- `--geo`：目标地区代码（如: US, GB, CN等），默认为全球
- `--timeframe`：分析时间范围，可选值：
  - `today 1-m`：过去1个月
  - `today 3-m`：过去3个月（默认）
  - `today 12-m`：过去12个月
  - `today 5-y`：过去5年
- `--output`：输出目录，默认为data
- `--min-score`：最低评分过滤，默认为10
- `--quiet, -q`：静默模式，只显示最终结果
- `--verbose, -v`：详细模式，显示所有中间过程

### 使用示例

```bash
# 基础分析
python run_analysis.py "ai marketing tool"

# 指定地区和时间范围
python run_analysis.py "ai tools" --geo US --timeframe "today 12-m"

# 静默模式（只看结果）
python run_analysis.py "ai tools" --quiet

# 详细模式（查看所有过程）
python run_analysis.py "ai tools" --verbose

# 设置最低评分过滤
python run_analysis.py "ai tools" --min-score 20
```

## 高级使用方式：完整功能版本

如果需要更精细的控制，可以直接使用 `market_analyzer.py`：

```bash
python market_analyzer.py --keywords "ai tools" --geo "US" --volume-weight 0.5 --growth-weight 0.3 --kd-weight 0.2
```

### 高级参数

- `--volume-weight`：搜索量权重，默认0.4
- `--growth-weight`：增长率权重，默认0.4
- `--kd-weight`：关键词难度权重，默认0.2
- `--no-enrich`：不丰富关键词数据

## 输出说明

工具会生成以下文件（保存在指定的输出目录中）：

### 主要输出文件

1. **`analysis_report_YYYY-MM-DD.json`** - 完整的分析报告（JSON格式）
2. **`trends_all_YYYY-MM-DD.csv`** - Google Trends原始数据
3. **`scored_YYYY-MM-DD.csv`** - 关键词评分结果
4. **`intent_YYYY-MM-DD.csv`** - 搜索意图分析结果

### 分类输出文件

- **`scored_high_score_YYYY-MM-DD.csv`** - 高分关键词（分数≥70）
- **`intent_I_YYYY-MM-DD.csv`** - 信息型关键词
- **`intent_C_YYYY-MM-DD.csv`** - 商业型关键词
- **`intent_E_YYYY-MM-DD.csv`** - 交易型关键词
- **`intent_N_YYYY-MM-DD.csv`** - 导航型关键词
- **`intent_B_YYYY-MM-DD.csv`** - 行为型关键词

### 日志文件

- **`analysis_log_YYYY-MM-DD.txt`** - 详细的执行日志

## 结果解读

### 最终结果展示

工具会在控制台显示美观的结果摘要，包括：

1. **分析概览**：关键词数量、耗时、高分关键词数等
2. **搜索意图分布**：可视化的意图分布图表
3. **Top 5 高分关键词**：最有潜力的关键词列表
4. **智能建议**：基于分析结果的营销建议

### 评分系统

- **A级 (80-100分)**：🟢 优秀，强烈推荐投入资源
- **B级 (60-79分)**：🟡 良好，值得考虑
- **C级 (40-59分)**：🟠 一般，需要进一步评估
- **D级 (20-39分)**：🔴 较差，不建议优先投入
- **F级 (0-19分)**：⚫ 很差，建议放弃

### 搜索意图类型

- **I (信息型)**：用户寻找信息和知识
- **N (导航型)**：用户想访问特定网站
- **C (商业型)**：用户在比较和评估产品
- **E (交易型)**：用户准备购买或下载
- **B (行为型)**：用户想执行特定行动

## 工作流程

1. **数据采集**：从Google Trends获取关键词的上升查询数据
2. **数据丰富**：添加模拟的搜索量、竞争度和CPC数据
3. **关键词评分**：基于多维度指标计算综合评分
4. **意图分析**：使用INCEB框架分析搜索意图
5. **结果输出**：生成报告和分类文件
6. **智能建议**：基于分析结果提供营销建议

## 注意事项

1. **API限制**：Google Trends API有请求频率限制，建议适度使用
2. **数据准确性**：当前版本使用模拟的搜索量和CPC数据，实际项目中建议集成真实API
3. **网络连接**：需要稳定的网络连接来访问Google Trends
4. **时间范围**：较长的时间范围可能需要更多处理时间

## 故障排除

### 常见问题

1. **没有获取到数据**：
   - 检查网络连接
   - 尝试更通用的关键词
   - 调整时间范围

2. **分析中断**：
   - 使用 `Ctrl+C` 可以安全中断分析
   - 已生成的中间结果会被保留

3. **结果文件找不到**：
   - 检查输出目录是否正确
   - 确认分析是否成功完成

### 获取帮助

```bash
# 查看帮助信息
python run_analysis.py --help
python market_analyzer.py --help